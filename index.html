<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>🍽️ مایرا</title>
  <style>
    body { font-family: Tahoma, sans-serif; text-align: right; direction: rtl; padding: 20px; background: #f8f9fa; }
    .btn { background: #007bff; color: white; padding: 14px; border: none; border-radius: 8px; font-size: 16px; width: 100%; margin: 15px 0; }
    input, select, textarea { padding: 12px; margin: 10px 0; width: 100%; border: 1px solid #ccc; border-radius: 6px; font-size: 16px; }
    label { font-weight: bold; margin-top: 15px; display: block; }
    h1 { color: #2c3e50; }
    .checkbox-group { display: flex; flex-wrap: wrap; gap: 10px; margin: 10px 0; }
    .checkbox-item { display: flex; align-items: center; margin: 5px; }
  </style>
</head>
<body>
  <h1>🍽️ مایرا</h1>
  <p><strong>ربات تغذیه هوشمند</strong> — رژیم شخصی‌سازی شده بر اساس سلامت، گروه خونی و مزاج شما</p>

  <!-- فرم کامل -->
  <label>نام شما</label>
  <input type="text" id="name" placeholder="نام شما" />

  <label>سن</label>
  <input type="number" id="age" placeholder="سن" />

  <label>وزن (کیلو)</label>
  <input type="number" id="weight" placeholder="وزن" />

  <label>قد (سانتی)</label>
  <input type="number" id="height" placeholder="قد" />

  <label>جنسیت</label>
  <select id="gender">
    <option value="female">زن</option>
    <option value="male">مرد</option>
  </select>

  <label>بیماری‌ها و شرایط سلامتی</label>
  <div class="checkbox-group">
    <label class="checkbox-item"><input type="checkbox" value="دیابت"> دیابت</label>
    <label class="checkbox-item"><input type="checkbox" value="سندرم تخمدان پلی کیستیک"> پلی کیستیک</label>
    <label class="checkbox-item"><input type="checkbox" value="کبد چرب"> کبد چرب</label>
    <label class="checkbox-item"><input type="checkbox" value="فشار خون بالا"> فشار خون</label>
    <label class="checkbox-item"><input type="checkbox" value="کلسترول بالا"> کلسترول</label>
    <label class="checkbox-item"><input type="checkbox" value="نقرس"> نقرس</label>
    <label class="checkbox-item"><input type="checkbox" value="بیماری سلیاک"> سلیاک</label>
    <label class="checkbox-item"><input type="checkbox" value="آلرژی"> آلرژی</label>
  </div>
  <input type="text" id="other_conditions" placeholder="بیماری دیگر (با کاما جدا کنید)" />

  <label>طبع (مزاج)</label>
  <select id="mizaj">
    <option>سرد</option>
    <option>گرم</option>
    <option>معتدل</option>
  </select>

  <label>گروه خونی</label>
  <select id="blood_type">
    <option>A</option>
    <option>B</option>
    <option>O</option>
    <option>AB</option>
  </select>

  <label>هدف</label>
  <select id="goal">
    <option value="weight_loss">کاهش وزن</option>
    <option value="muscle_gain">افزایش عضله</option>
    <option value="maintain">ثبات وزن</option>
  </select>

  <label>مدت (هفته)</label>
  <select id="duration_weeks">
    <option>2</option>
    <option>4</option>
    <option>6</option>
    <option>8</option>
  </select>

  <label>فعالیت روزانه</label>
  <select id="activity">
    <option value="low">کم</option>
    <option value="moderate">متوسط</option>
    <option value="high">زیاد</option>
  </select>

  <label>عدم تحمل لاکتوز؟</label>
  <select id="lactose_intolerance">
    <option>خیر</option>
    <option>بله</option>
  </select>

  <label>حساسیت به گلوتن؟</label>
  <select id="gluten_free">
    <option>خیر</option>
    <option>بله</option>
  </select>

  <button class="btn" onclick="pay()">دریافت رژیم (پرداخت موردنیاز)</button>

  <script>
    function pay() {
      const name = document.getElementById('name').value;
      const age = document.getElementById('age').value;
      const weight = document.getElementById('weight').value;
      const height = document.getElementById('height').value;
      const gender = document.getElementById('gender').value;
      const mizaj = document.getElementById('mizaj').value;
      const blood_type = document.getElementById('blood_type').value;
      const goal = document.getElementById('goal').value;
      const duration_weeks = document.getElementById('duration_weeks').value;
      const activity = document.getElementById('activity').value;
      const lactose_intolerance = document.getElementById('lactose_intolerance').value === 'بله';
      const gluten_free = document.getElementById('gluten_free').value === 'بله';

      const conditions = [];
      document.querySelectorAll('.checkbox-group input:checked').forEach(cb => {
        conditions.push(cb.value);
      });
      const other = document.getElementById('other_conditions').value;
      if (other) conditions.push(...other.split(',').map(s => s.trim()));

      // ساخت لینک بازگشت بعد از پرداخت
      const successUrl = encodeURIComponent(
        `https://yourusername.github.io/myra-app/success.html?name=${encodeURIComponent(name)}&age=${age}&weight=${weight}&height=${height}&gender=${gender}&mizaj=${mizaj}&blood_type=${blood_type}&goal=${goal}&duration_weeks=${duration_weeks}&activity=${activity}&lactose_intolerance=${lactose_intolerance}&gluten_free=${gluten_free}&conditions=${encodeURIComponent(conditions.join(','))}`
      );

      // ⚠️ جای your-zarinpal-link رو با لینک واقعی زرین‌پال خودت عوض کن
      window.location.href = `https://zarinp.al/your-zarinpal-link?w=${successUrl}`;
    }
  </script>
</body>
</html>